import{r as v,j as s,R as I,L as F,u as Ce}from"./index-Dx_b4yI2.js";import{H as Ie,F as Te}from"./Footer-Ojnh55bt.js";import{c as R,r as fe,i as Le,f as _,a as ee,b as xe,p as Me,v as Re,d as Ae,e as ke,g as De,n as we,h as Oe,s as ze,u as te,j as be,k as se,m as z,M as He,l as X,o as j,A as ye}from"./proxy-Ci5s01ig.js";import{X as ve}from"./x-D9StPEC6.js";import{P as _e}from"./play-DQ2HviLw.js";import{A as $e}from"./arrow-right-D1yInJ7c.js";import"./house-D8vFhceT.js";const Fe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ie=R("chevron-down",Fe);const We=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Be=R("clock",We);const Ge=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],qe=R("hand",Ge);const Ve=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Z=R("map-pin",Ve);const Ue=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],Xe=R("monitor-play",Ue);const Ye=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],J=R("zoom-in",Ye),G=new WeakMap;let q;const je=(i,r,n)=>(o,l)=>l&&l[0]?l[0][i+"Size"]:Le(o)&&"getBBox"in o?o.getBBox()[r]:o[n],Ze=je("inline","width","offsetWidth"),Je=je("block","height","offsetHeight");function Ke({target:i,borderBoxSize:r}){G.get(i)?.forEach(n=>{n(i,{get width(){return Ze(i,r)},get height(){return Je(i,r)}})})}function Qe(i){i.forEach(Ke)}function et(){typeof ResizeObserver>"u"||(q=new ResizeObserver(Qe))}function tt(i,r){q||et();const n=fe(i);return n.forEach(o=>{let l=G.get(o);l||(l=new Set,G.set(o,l)),l.add(r),q?.observe(o)}),()=>{n.forEach(o=>{const l=G.get(o);l?.delete(r),l?.size||q?.unobserve(o)})}}const V=new Set;let M;function st(){M=()=>{const i={get width(){return window.innerWidth},get height(){return window.innerHeight}};V.forEach(r=>r(i))},window.addEventListener("resize",M)}function it(i){return V.add(i),M||st(),()=>{V.delete(i),!V.size&&typeof M=="function"&&(window.removeEventListener("resize",M),M=void 0)}}function at(i,r){return typeof i=="function"?it(i):tt(i,r)}function Pe(i,r){let n;const o=()=>{const{currentTime:l}=r,p=(l===null?0:l.value)/100;n!==p&&i(p),n=p};return _.preUpdate(o,!0),()=>ee(o)}function nt(...i){const r=!Array.isArray(i[0]),n=r?0:-1,o=i[0+n],l=i[1+n],d=i[2+n],p=i[3+n],m=xe(l,d,p);return r?m(o):m}const rt=50,ae=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),ot=()=>({time:0,x:ae(),y:ae()}),lt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function ne(i,r,n,o){const l=n[r],{length:d,position:p}=lt[r],m=l.current,y=n.time;l.current=i[`scroll${p}`],l.scrollLength=i[`scroll${d}`]-i[`client${d}`],l.offset.length=0,l.offset[0]=0,l.offset[1]=l.scrollLength,l.progress=Me(0,l.scrollLength,l.current);const f=o-y;l.velocity=f>rt?0:Re(l.current-m,f)}function ht(i,r,n){ne(i,"x",r,n),ne(i,"y",r,n),r.time=n}function ct(i,r){const n={x:0,y:0};let o=i;for(;o&&o!==r;)if(Ae(o))n.x+=o.offsetLeft,n.y+=o.offsetTop,o=o.offsetParent;else if(o.tagName==="svg"){const l=o.getBoundingClientRect();o=o.parentElement;const d=o.getBoundingClientRect();n.x+=l.left-d.left,n.y+=l.top-d.top}else if(o instanceof SVGGraphicsElement){const{x:l,y:d}=o.getBBox();n.x+=l,n.y+=d;let p=null,m=o.parentNode;for(;!p;)m.tagName==="svg"&&(p=m),m=o.parentNode;o=p}else break;return n}const K={start:0,center:.5,end:1};function re(i,r,n=0){let o=0;if(i in K&&(i=K[i]),typeof i=="string"){const l=parseFloat(i);i.endsWith("px")?o=l:i.endsWith("%")?i=l/100:i.endsWith("vw")?o=l/100*document.documentElement.clientWidth:i.endsWith("vh")?o=l/100*document.documentElement.clientHeight:i=l}return typeof i=="number"&&(o=r*i),n+o}const dt=[0,0];function gt(i,r,n,o){let l=Array.isArray(i)?i:dt,d=0,p=0;return typeof i=="number"?l=[i,i]:typeof i=="string"&&(i=i.trim(),i.includes(" ")?l=i.split(" "):l=[i,K[i]?i:"0"]),d=re(l[0],n,o),p=re(l[1],r),d-p}const pt={All:[[0,0],[1,1]]},ut={x:0,y:0};function mt(i){return"getBBox"in i&&i.tagName!=="svg"?i.getBBox():{width:i.clientWidth,height:i.clientHeight}}function ft(i,r,n){const{offset:o=pt.All}=n,{target:l=i,axis:d="y"}=n,p=d==="y"?"height":"width",m=l!==i?ct(l,i):ut,y=l===i?{width:i.scrollWidth,height:i.scrollHeight}:mt(l),f={width:i.clientWidth,height:i.clientHeight};r[d].offset.length=0;let b=!r[d].interpolate;const P=o.length;for(let N=0;N<P;N++){const C=gt(o[N],f[p],y[p],m[d]);!b&&C!==r[d].interpolatorOffsets[N]&&(b=!0),r[d].offset[N]=C}b&&(r[d].interpolate=xe(r[d].offset,ke(o),{clamp:!1}),r[d].interpolatorOffsets=[...r[d].offset]),r[d].progress=De(0,1,r[d].interpolate(r[d].current))}function xt(i,r=i,n){if(n.x.targetOffset=0,n.y.targetOffset=0,r!==i){let o=r;for(;o&&o!==i;)n.x.targetOffset+=o.offsetLeft,n.y.targetOffset+=o.offsetTop,o=o.offsetParent}n.x.targetLength=r===i?r.scrollWidth:r.clientWidth,n.y.targetLength=r===i?r.scrollHeight:r.clientHeight,n.x.containerLength=i.clientWidth,n.y.containerLength=i.clientHeight}function wt(i,r,n,o={}){return{measure:l=>{xt(i,o.target,n),ht(i,n,l),(o.offset||o.target)&&ft(i,n,o)},notify:()=>r(n)}}const O=new WeakMap,oe=new WeakMap,Y=new WeakMap,le=i=>i===document.scrollingElement?window:i;function Se(i,{container:r=document.scrollingElement,...n}={}){if(!r)return we;let o=Y.get(r);o||(o=new Set,Y.set(r,o));const l=ot(),d=wt(r,i,l,n);if(o.add(d),!O.has(r)){const m=()=>{for(const P of o)P.measure(Oe.timestamp);_.preUpdate(y)},y=()=>{for(const P of o)P.notify()},f=()=>_.read(m);O.set(r,f);const b=le(r);window.addEventListener("resize",f,{passive:!0}),r!==document.documentElement&&oe.set(r,at(r,f)),b.addEventListener("scroll",f,{passive:!0}),f()}const p=O.get(r);return _.read(p,!1,!0),()=>{ee(p);const m=Y.get(r);if(!m||(m.delete(d),m.size))return;const y=O.get(r);O.delete(r),y&&(le(r).removeEventListener("scroll",y),oe.get(r)?.(),window.removeEventListener("resize",y))}}const he=new Map;function bt(i){const r={value:0},n=Se(o=>{r.value=o[i.axis].progress*100},i);return{currentTime:r,cancel:n}}function Ne({source:i,container:r,...n}){const{axis:o}=n;i&&(r=i);const l=he.get(r)??new Map;he.set(r,l);const d=n.target??"self",p=l.get(d)??{},m=o+(n.offset??[]).join(",");return p[m]||(p[m]=!n.target&&ze()?new ScrollTimeline({source:r,axis:o}):bt({container:r,...n})),p[m]}function yt(i,r){const n=Ne(r);return i.attachTimeline({timeline:r.target?void 0:n,observe:o=>(o.pause(),Pe(l=>{o.time=o.iterationDuration*l},n))})}function vt(i){return i.length===2}function jt(i,r){return vt(i)?Se(n=>{i(n[r.axis].progress,n)},r):Pe(i,Ne(r))}function Pt(i,{axis:r="y",container:n=document.scrollingElement,...o}={}){if(!n)return we;const l={axis:r,container:n,...o};return typeof i=="function"?jt(i,l):yt(i,l)}const St=()=>({scrollX:z(0),scrollY:z(0),scrollXProgress:z(0),scrollYProgress:z(0)}),B=i=>i?!i.current:!1;function Nt({container:i,target:r,...n}={}){const o=te(St),l=v.useRef(null),d=v.useRef(!1),p=v.useCallback(()=>(l.current=Pt((m,{x:y,y:f})=>{o.scrollX.set(y.current),o.scrollXProgress.set(y.progress),o.scrollY.set(f.current),o.scrollYProgress.set(f.progress)},{...n,container:i?.current||void 0,target:r?.current||void 0}),()=>{l.current?.()}),[i,r,JSON.stringify(n.offset)]);return be(()=>{if(d.current=!1,B(i)||B(r)){d.current=!0;return}else return p()},[p]),v.useEffect(()=>{if(d.current)return se(!B(i)),se(!B(r)),p()},[p]),o}function Q(i){const r=te(()=>z(i)),{isStatic:n}=v.useContext(He);if(n){const[,o]=v.useState(i);v.useEffect(()=>r.on("change",o),[])}return r}function Ee(i,r){const n=Q(r()),o=()=>n.set(r());return o(),be(()=>{const l=()=>_.preRender(o,!1,!0),d=i.map(p=>p.on("change",l));return()=>{d.forEach(p=>p()),ee(o)}}),n}function Et(i){X.current=[],i();const r=Ee(X.current,i);return X.current=void 0,r}function $(i,r,n,o){if(typeof i=="function")return Et(i);const l=typeof r=="function"?r:nt(r,n,o);return Array.isArray(i)?ce(i,l):ce([i],([d])=>l(d))}function ce(i,r){const n=te(()=>[]);return Ee(i,()=>{n.length=0;const o=i.length;for(let l=0;l<o;l++)n[l]=i[l].get();return r(n)})}const Ct={some:0,all:1};function It(i,r,{root:n,margin:o,amount:l="some"}={}){const d=fe(i),p=new WeakMap,m=f=>{f.forEach(b=>{const P=p.get(b.target);if(b.isIntersecting!==!!P)if(b.isIntersecting){const N=r(b.target,b);typeof N=="function"?p.set(b.target,N):y.unobserve(b.target)}else typeof P=="function"&&(P(b),p.delete(b.target))})},y=new IntersectionObserver(m,{root:n,rootMargin:o,threshold:typeof l=="number"?l:Ct[l]});return d.forEach(f=>y.observe(f)),()=>y.disconnect()}function Tt(i,{root:r,margin:n,amount:o,once:l=!1,initial:d=!1}={}){const[p,m]=v.useState(d);return v.useEffect(()=>{if(!i.current||l&&p)return;const y=()=>(m(!0),l?void 0:()=>m(!1)),f={root:r&&r.current||void 0,margin:n,amount:o};return It(i.current,y,f)},[r,i,n,l,o]),p}const Lt=()=>{const i=v.useRef(null);return v.useEffect(()=>{const r=i.current,n=r.getContext("2d");let o,l=[];const d=()=>{r.width=window.innerWidth,r.height=window.innerHeight};window.addEventListener("resize",d),d();class p{constructor(b,P,N){this.x=b,this.y=P,this.color=N,this.velocity={x:(Math.random()-.5)*5,y:(Math.random()-.5)*5},this.alpha=1,this.decay=Math.random()*.015+.005}draw(){n.save(),n.globalAlpha=this.alpha,n.beginPath(),n.arc(this.x,this.y,2,0,Math.PI*2),n.fillStyle=this.color,n.fill(),n.restore()}update(){this.x+=this.velocity.x,this.y+=this.velocity.y,this.alpha-=this.decay}}const m=()=>{const f=Math.random()*r.width,b=Math.random()*(r.height/2),P=["#d4af37","#ff007f","#ff7f00","#00ff00","#00ffff"],N=P[Math.floor(Math.random()*P.length)];for(let C=0;C<30;C++)l.push(new p(f,b,N))},y=()=>{o=requestAnimationFrame(y),n.fillStyle="rgba(15, 23, 42, 0.1)",n.fillRect(0,0,r.width,r.height),Math.random()<.05&&m(),l.forEach((f,b)=>{f.alpha>0?(f.update(),f.draw()):l.splice(b,1)})};return y(),()=>{window.removeEventListener("resize",d),cancelAnimationFrame(o)}},[]),s.jsx("canvas",{ref:i,className:"absolute top-0 left-0 w-full h-full pointer-events-none"})};function Mt(){const[i,r]=v.useState(!1);v.useEffect(()=>{const p=()=>r(window.innerWidth<768);return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const{scrollY:n}=Nt();$(n,[0,300],[0,-60]),$(n,[0,300],[1,1.02]);const o=$(n,[0,250],[1,0]),l={animate:{y:[0,-8,0],rotate:[0,1.5,-1.5,0],transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},rotate:{duration:3,repeat:1/0,ease:"easeInOut"}}},hover:{scale:1.1,filter:"brightness(1.1)",transition:{duration:.3}}},d={animate:{y:[0,-3,0],transition:{duration:4,repeat:1/0,ease:"easeInOut"}},hover:{scale:1.02,filter:"brightness(1.05)",y:-5,transition:{duration:.3}}};return s.jsxs("section",{id:"hero",className:"sticky top-0 h-[100dvh] flex flex-col items-center justify-start overflow-hidden bg-feria-blue selection:bg-feria-gold selection:text-feria-blue",children:[s.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-b from-slate-900 to-feria-blue pointer-events-none",children:!i&&s.jsx(Lt,{})}),s.jsxs(j.div,{style:{opacity:o},className:"relative z-20 mt-16 md:mt-24 flex flex-col items-center gap-1 md:gap-2 px-4 w-full",children:[s.jsx("img",{src:"/LOGOS/logo_chilpancingo_bicentenario.webp",alt:"Chilpancingo Logo",className:"h-[14vh] md:h-[16vh] object-contain drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]"}),s.jsx("img",{src:"/LOGOS/logo_200_anos.webp",alt:"200 Años Logo",className:"h-[9vh] md:h-[10vh] object-contain drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]"})]}),s.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:1},className:"relative z-20 mt-2 md:mt-4 flex flex-col items-center gap-[-10px] text-white/60 md:hidden",children:[s.jsx(j.div,{animate:{y:[0,8,0],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:s.jsx(ie,{size:32,strokeWidth:1.5})}),s.jsx(j.div,{animate:{y:[0,8,0],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.2},className:"-mt-4",children:s.jsx(ie,{size:32,strokeWidth:1.5})}),s.jsx(j.span,{initial:{opacity:0},animate:{opacity:.8},transition:{delay:2,duration:1},className:"text-[10px] uppercase tracking-widest mt-1 font-medium",children:"Desliza hacia abajo"})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 w-full h-[70vh] flex flex-col justify-end items-center pointer-events-none z-10 pb-[6vh] md:pb-0",children:[s.jsxs(j.div,{className:"relative w-full h-full flex items-end justify-center pb-0",children:[s.jsxs("div",{className:"absolute bottom-0 left-0 w-full h-[60vh] flex items-end justify-between px-0 opacity-100 pointer-events-none z-10",children:[s.jsxs("div",{className:"relative w-1/2 h-full",children:[s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/CATEDRAL_Mesa de trabajo 1.webp",className:"absolute left-[0%] bottom-[8vh] md:bottom-[13vh] w-[35%] md:w-[22%] max-w-[300px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Catedral L"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SAN MATEO_Mesa de trabajo 1.webp",className:"absolute left-[13%] bottom-[7vh] md:bottom-[12vh] w-[26%] md:w-[18%] max-w-[200px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Mateo L"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA SAN FRANCISCO_Mesa de trabajo 1.webp",className:"absolute left-[25%] bottom-[6vh] md:bottom-[10vh] w-[22%] md:w-[16%] max-w-[170px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Francisco L"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE TEQUICORRAL_Mesa de trabajo 1.webp",className:"absolute left-[36%] bottom-[5vh] md:bottom-[11vh] w-[24%] md:w-[14%] max-w-[180px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Tequicorral L"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SANTA CRUZ_Mesa de trabajo 1.webp",className:"absolute left-[46%] bottom-[4vh] md:bottom-[9vh] w-[22%] md:w-[15%] max-w-[180px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Santa Cruz L"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SAN ANTONIO_Mesa de trabajo 1.webp",className:"absolute left-[58%] bottom-[3vh] md:bottom-[7vh] w-[30%] md:w-[14%] max-w-[200px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Antonio L"})]}),s.jsxs("div",{className:"relative w-1/2 h-full",children:[s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SAN ANTONIO_Mesa de trabajo 1.webp",className:"absolute right-[60%] bottom-[3vh] md:bottom-[7vh] w-[30%] md:w-[14%] max-w-[200px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Antonio R"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SANTA CRUZ_Mesa de trabajo 1.webp",className:"absolute right-[46%] bottom-[4vh] md:bottom-[9vh] w-[22%] md:w-[15%] max-w-[180px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Santa Cruz R"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE TEQUICORRAL_Mesa de trabajo 1.webp",className:"absolute right-[36%] bottom-[5vh] md:bottom-[11vh] w-[24%] md:w-[14%] max-w-[180px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Tequicorral R"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA SAN FRANCISCO_Mesa de trabajo 1.webp",className:"absolute right-[25%] bottom-[6vh] md:bottom-[10vh] w-[22%] md:w-[16%] max-w-[170px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Francisco R"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/IGLESIA DE SAN MATEO_Mesa de trabajo 1.webp",className:"absolute right-[13%] bottom-[7vh] md:bottom-[12vh] w-[26%] md:w-[18%] max-w-[200px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"San Mateo R"}),s.jsx(j.img,{variants:d,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/CATEDRAL_Mesa de trabajo 1.webp",className:"absolute right-[0%] bottom-[8vh] md:bottom-[13vh] w-[35%] md:w-[22%] max-w-[300px] object-contain translate-y-4 pointer-events-auto cursor-pointer",alt:"Catedral R"})]})]}),s.jsxs(j.div,{className:"relative z-20 flex items-end justify-center w-full pb-2 md:pb-6",children:[s.jsx(j.img,{variants:l,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/NICOLAS BRAVO_Mesa de trabajo 1.webp",className:"h-[26vh] md:h-[42vh] object-contain md:drop-shadow-2xl z-20 origin-bottom -mr-[25%] md:-mr-[12%] translate-x-4 translate-y-6 md:translate-y-0",alt:"Nicolas Bravo"}),s.jsx(j.img,{variants:l,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/ESCARAMUSA2_Mesa de trabajo 1.webp",className:"h-[36vh] md:h-[58vh] object-contain md:drop-shadow-2xl z-30 origin-bottom translate-y-6",alt:"Escaramusa"}),s.jsx(j.img,{variants:l,animate:"animate",whileHover:"hover",src:"/ELEMENTOS/GUERRERO JAGUAR_Mesa de trabajo 1.webp",className:"h-[29vh] md:h-[44vh] object-contain md:drop-shadow-2xl z-20 origin-bottom -ml-[25%] md:-ml-[12%] -translate-x-4 translate-y-16 md:translate-y-20",alt:"Jaguar"})]})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 w-full z-40",children:[s.jsx("svg",{viewBox:"0 0 1440 320",className:"w-full h-[26vh] md:h-[30vh] block",preserveAspectRatio:"none",children:s.jsx("path",{fill:"#ffffff",fillOpacity:"1",d:"M0,128L720,240L1440,128L1440,320L0,320Z",className:"drop-shadow-[0_-5px_15px_rgba(0,0,0,0.1)]"})}),s.jsxs("div",{className:"absolute bottom-2 left-0 w-full flex justify-center items-center gap-4 md:gap-12 px-4 pb-3 z-50",children:[s.jsx("img",{src:"/LOGOS/H AYUNTAMIENTO .webp",className:"h-8 md:h-10 object-contain",alt:"Ayuntamiento"}),s.jsx("img",{src:"/LOGOS/LOGO RENACE.webp",className:"h-6 md:h-8 object-contain",alt:"Renace"}),s.jsx("img",{src:"/LOGOS/CONSEJO LOGO.webp",className:"h-8 md:h-10 object-contain",alt:"Consejo"})]})]})]})]})}const Rt=({avatarUrl:i="",miniAvatarUrl:r,name:n="Title",title:o="Subtitle",handle:l="Handle",status:d="Year",contactText:p="Ver Detalles",contactLink:m,innerGradient:y,behindGlowColor:f,className:b="",showUserInfo:P=!0,onContactClick:N})=>{const C=v.useMemo(()=>({"--inner-gradient":y||"linear-gradient(145deg, #333 0%, #000 100%)","--behind-glow-color":f||"rgba(255, 255, 255, 0.2)"}),[y,f]);return s.jsxs("div",{className:`pc-card-wrapper ${b}`.trim(),style:C,children:[s.jsxs("div",{className:"pc-card-simple",children:[s.jsxs("div",{className:"pc-image-container",children:[s.jsx("img",{src:i,alt:n,className:"pc-main-image",loading:"lazy"}),s.jsx("div",{className:"pc-overlay-gradient"})]}),P&&s.jsxs("div",{className:"pc-content-simple",children:[s.jsxs("div",{className:"pc-info-row",children:[s.jsx("div",{className:"pc-mini-avatar-simple",children:s.jsx("img",{src:r||i,alt:"mini"})}),s.jsxs("div",{className:"pc-text-block",children:[s.jsxs("span",{className:"pc-handle-simple",children:["@",l]}),s.jsx("span",{className:"pc-status-simple",children:d})]})]}),m?s.jsx(F,{to:m,className:"pc-btn-simple",children:p}):s.jsx("button",{onClick:N,className:"pc-btn-simple",children:p})]})]}),s.jsx("div",{className:"pc-glow-simple"})]})},de=I.memo(Rt);function At(){const i=v.useRef(null);v.useRef(null);const r=Tt(i,{once:!0,margin:"-10%"}),n=[{id:1,src:"/cartel_francisco.webp",title:"Cartel Oficial",artist:"Francisco Alarcón Tapia",description:"Obra representativa con elementos tradicionales.",gradient:"linear-gradient(145deg, #d44d4d8c 0%, #ffc10744 100%)",glow:"rgba(255, 100, 50, 0.67)",link:"/cartel-oficial"},{id:2,src:"/cartel_propuesta.webp",title:"Propuesta Bicentenario",artist:"Edición Especial",description:"Edición especial para los 200 años de la feria.",gradient:"linear-gradient(145deg, #4b6cb78c 0%, #18284844 100%)",glow:"rgba(100, 149, 237, 0.67)",link:"/propuesta-bicentenario"},{id:3,src:"/poster_porrazo.webp",title:"Porrazo de Tigre",artist:"Tradición Viva",description:"La fuerza y el color de nuestra tradición.",gradient:"linear-gradient(145deg, #f59e0b8c 0%, #78350f44 100%)",glow:"rgba(245, 158, 11, 0.67)",link:"/porrazo-del-tigre"}],[o,l]=v.useState(1),d=n.find(p=>p.id===o)||n[0];return s.jsxs("section",{id:"posters",ref:i,className:"relative py-24 px-4 overflow-hidden bg-neutral-900",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-neutral-800 via-neutral-900 to-black opacity-80"}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-6 md:mb-16",children:[s.jsx(j.h2,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.8},className:"text-4xl md:text-5xl font-serif text-amber-50 mb-4",children:"Galería del Bicentenario"}),s.jsx(j.div,{initial:{opacity:0,width:0},animate:r?{opacity:1,width:"100px"}:{},transition:{delay:.3,duration:.8},className:"h-1 bg-amber-600 mx-auto"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"md:hidden flex flex-col items-center",children:[s.jsx("div",{className:"w-full max-w-[95vw] mx-auto flex justify-center items-center mb-8",children:s.jsx(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full flex justify-center",children:s.jsx(de,{avatarUrl:d.src,name:d.title,title:d.artist,handle:"Feria200",status:"2025",contactText:"Ver Detalles",contactLink:d.link,innerGradient:d.gradient,behindGlowColor:d.glow,showUserInfo:!0,enableTilt:!1,enableMobileTilt:!1,className:"w-full"})},d.id)}),s.jsx("div",{className:"grid grid-cols-3 gap-2 w-full max-w-[95vw] mx-auto text-xs",children:n.map(p=>s.jsx("button",{onClick:()=>l(p.id),className:`relative px-2 py-3 rounded-lg font-medium transition-all duration-300 overflow-hidden ${o===p.id?"text-white scale-105 shadow-lg ring-2 ring-amber-500/50":"text-neutral-400 hover:text-white opacity-75"}`,style:{background:o===p.id?p.gradient:"rgba(255,255,255,0.05)"},children:s.jsx("span",{className:"relative z-10 block truncate",children:p.title})},p.id))})]}),s.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-8 items-center justify-center",children:n.map((p,m)=>s.jsx(j.div,{initial:{opacity:0,y:50},animate:r?{opacity:1,y:0}:{},transition:{delay:.2+m*.2,duration:.8},className:"flex justify-center",children:s.jsx(de,{avatarUrl:p.src,name:p.title,title:p.artist,handle:"Feria200",status:"2025",contactText:"Ver Detalles",contactLink:p.link,innerGradient:p.gradient,behindGlowColor:p.glow,showUserInfo:!0,className:"w-full max-w-sm"})},p.id))})]}),s.jsx("div",{className:"mt-12 text-center relative z-20",children:s.jsxs(F,{to:"/carteles-historicos",className:"inline-flex items-center gap-2 px-8 py-3 bg-amber-900/50 hover:bg-amber-800 text-amber-100 border border-amber-700/50 rounded-full transition-all duration-300 font-serif tracking-wide group",children:["Ver Todos los Carteles Históricos",s.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"→"})]})})]})]})}const ge=[{year:"1825",title:"Origen",image:"/ELEMENTOS/NICOLAS BRAVO_Mesa de trabajo 1.webp",secondaryImage:"/Decreto de creación de la feria.webp",description:"Nacida en la posguerra de 1825 para reactivar la economía local, la Feria fue impulsada por el General Nicolás Bravo para auxiliar a una población devastada. Oficializada mediante el Decreto n.º 40 el 26 de marzo, se estableció en diciembre como un medio de recuperación social, honrando el sacrificio de Chilpancingo en la causa insurgente."},{year:"Siglo XIX",title:"Consolidación",images:["/Linea_Tiempo/catedral.webp","/Linea_Tiempo/catedral2.webp"],secondaryImage:"/escudopendon.webp",description:`Desde su inicio, la feria trascendió lo comercial para convertirse en el corazón cultural de la ciudad. Durante el siglo XIX, el 'Paseo del Pendón' emergió como el hilo conductor que unía a los barrios tradicionales. La festividad integró danzas y rituales, consolidándose como un símbolo de identidad que perdura hasta hoy.
        
        *Fotografías históricas: Zócalo y Catedral de la Asunción, testigos del corazón de la ciudad.*`},{year:"1900",title:"La Cuelga de Petaquillas",image:"/Linea_Tiempo/petaquillas.webp",description:`Tradición emblemática de hermandad entre pueblos. Petaquillas enviaba una ofrenda o "cuelga" de mezcal y cadenas de cempasúchil a Chilpancingo, anunciada con música y cohetes. Aunque dejó de realizarse en 1936, permanece como un símbolo histórico de la solidaridad que cimentó nuestra feria.
        
        *Fotografía representativa: Iglesia de San Agustín en el poblado de Petaquillas.*`},{year:"Siglo XX",title:"El Porrazo de Tigres",image:"/ELEMENTOS/PORRAZO_Mesa de trabajo 1.webp",description:`Símbolo de la feria, representa la antigua competencia entre barrios. Originalmente era un encuentro entre los tigres de Amojileca y Chilpancingo en el río Huacapa.
        
        "El tigre carga sobre los hombros la representación del barrio que lo vio nacer; su deber es defender con honor y valentía la presea del ganador..."`},{year:"1979",title:"El Escudo del Pendón",images:["/escudopendon.webp","/Linea_Tiempo/Escudoedicion199.webp"],secondaryImage:"/Linea_Tiempo/acta.webp",description:`Establecido por el Cabildo el 21 de septiembre de 1979. Diseñado por Francisco Antonio Alarcón Tapia, representa a Chilpancingo como "lugar de avispas", con cadenas de cempasúchil que simbolizan festividad y bienvenida.
        
        Al centro figuran los tlacololeros y el tigre, con la iglesia de la Asunción al fondo.
        
        *Contexto Histórico: El diseño oficial se eligió mediante concurso y quedó asentado en el Acta de Cabildo mostrada abajo. También se aprecia una versión del pendón de fines del siglo XX utilizado en la festividad.*`},{year:"Actualidad",title:"Modernización y Sede",image:"/Linea_Tiempo/Sede.webp",description:"El crecimiento de la ciudad exigió un nuevo hogar para la fiesta. Tras un periodo itinerante, la feria se estableció definitivamente en los antiguos viveros del Barrio de San Antonio. Hoy, con instalaciones permanentes y un patronato oficial, la feria conjuga tradición y modernidad, manteniéndose como la celebración más importante de Guerrero."}];function kt(){const[i,r]=v.useState(null);return s.jsxs("section",{id:"history",className:"bg-feria-blue text-white py-20 relative",children:[s.jsxs("div",{className:"container mx-auto px-4 mb-10 md:mb-32",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-center text-feria-gold mb-6",children:"Línea de Tiempo 1825-2025"}),s.jsxs("p",{className:"text-center text-gray-300 max-w-2xl mx-auto mb-8 md:mb-12",children:["Una historia viva que se cuenta a través de los siglos.",s.jsx("span",{className:"block md:hidden text-feria-gold/80 text-sm mt-2 animate-pulse",children:"← Desliza horizontalmente →"}),s.jsx("span",{className:"hidden md:block text-feria-gold/80 text-sm mt-2",children:"Desliza hacia abajo para recorrer la historia"})]})]}),s.jsx("div",{className:"md:hidden flex overflow-x-auto snap-x snap-mandatory gap-6 px-6 pb-12 w-full no-scrollbar relative z-10",children:ge.map((n,o)=>s.jsx("div",{className:"snap-center shrink-0 w-[85vw] max-w-sm flex flex-col",children:s.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-xl border border-white/20 h-full flex flex-col",children:[s.jsxs("div",{className:"h-56 relative group",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-feria-gold to-feria-red z-10"}),s.jsx("img",{src:n.images?n.images[0]:n.image,alt:n.title,className:"w-full h-full object-cover",onError:l=>l.target.style.display="none"}),s.jsx("div",{className:"absolute bottom-[-1px] left-0 w-full h-24 bg-gradient-to-t from-white to-transparent"}),s.jsxs("div",{className:"absolute top-4 left-4 bg-feria-blue/90 text-white font-bold px-3 py-1 rounded-lg shadow-lg border border-feria-gold/50 backdrop-blur-md z-20",children:[s.jsx("span",{className:"text-xs text-feria-gold uppercase mr-1",children:"Año"}),n.year]})]}),s.jsxs("div",{className:"p-6 pt-2 flex-1 flex flex-col text-feria-blue",children:[s.jsx("h3",{className:"text-2xl font-serif font-bold mb-3 leading-tight",children:n.title}),s.jsx("div",{className:"w-12 h-1 bg-feria-gold/50 rounded-full mb-4"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4 flex-1",children:n.description}),n.secondaryImage&&s.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"rounded-lg overflow-hidden border border-gray-200 bg-gray-50 p-1 relative group cursor-pointer",onClick:()=>r(n.secondaryImage),children:[s.jsx("img",{src:n.secondaryImage,className:"w-full h-32 object-contain transition-transform duration-300 group-hover:scale-105",alt:"Documento histórico"}),s.jsx("div",{className:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(J,{className:"text-feria-blue drop-shadow-md",size:32})}),s.jsx("div",{className:"absolute top-2 right-2 bg-white/90 rounded-full p-1 shadow-sm opacity-80",children:s.jsx(J,{size:14,className:"text-feria-blue"})}),s.jsxs("p",{className:"text-[10px] text-center text-feria-blue font-bold mt-1 uppercase tracking-wider flex items-center justify-center gap-1",children:[s.jsx("span",{className:"animate-pulse",children:"●"})," Toca para ampliar"]})]})})]})]})},o))}),s.jsxs("div",{className:"hidden md:block relative container mx-auto px-4 pb-24",children:[s.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-[2px] bg-gradient-to-b from-feria-gold/0 via-feria-gold/50 to-feria-gold/0 transform -translate-x-1/2"}),s.jsx("div",{className:"relative flex flex-col",children:ge.map((n,o)=>s.jsx(Dt,{event:n,index:o,onImageClick:r},o))})]}),s.jsx(ye,{children:i&&s.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",onClick:()=>r(null),children:s.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative max-w-5xl max-h-[90vh] rounded-xl overflow-hidden shadow-2xl flex items-center justify-center",onClick:n=>n.stopPropagation(),children:[s.jsx("img",{src:i,alt:"Vista ampliada",className:"max-w-full max-h-[85vh] object-contain rounded-md"}),s.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full transition-colors backdrop-blur-sm border border-white/20",children:s.jsx(ve,{size:28})})]})})})]})}function Dt({event:i,index:r,onImageClick:n}){const o=r%2===0,[l,d]=v.useState(0),p=i.images?i.images[l]:i.image,m=y=>{y.stopPropagation(),i.images&&d(f=>(f+1)%i.images.length)};return s.jsxs("div",{className:`flex items-center justify-between w-full mb-24 relative ${o?"flex-row":"flex-row-reverse"}`,children:[s.jsx("div",{className:"w-5/12",children:s.jsxs(j.div,{initial:{opacity:0,x:o?-50:50},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,ease:"easeOut"},className:`bg-white text-feria-blue p-8 rounded-2xl shadow-xl border border-white/10 relative ${o?"text-right":"text-left"}`,children:[s.jsx("div",{className:`absolute top-[-20px] ${o?"right-8":"left-8"} bg-white text-feria-blue border-4 border-feria-blue font-serif font-bold px-6 py-2 rounded-full shadow-xl z-20 text-lg`,children:i.year}),s.jsx("h3",{className:"text-3xl font-serif font-bold mb-4 mt-2",children:i.title}),s.jsx("div",{className:"text-gray-600 leading-relaxed mb-4 text-sm whitespace-pre-line",children:i.description}),i.secondaryImage&&s.jsx("div",{className:`mt-6 flex ${o?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:"relative group cursor-pointer w-24 h-32 bg-gray-100 rounded-lg shadow-md border hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:rotate-2",onClick:()=>n&&n(i.secondaryImage),children:[s.jsx("img",{src:i.secondaryImage,alt:"Documento histórico",className:"w-full h-full object-cover rounded-lg opacity-90 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 group-hover:bg-black/10 rounded-lg transition-colors",children:s.jsx(J,{className:"text-feria-blue bg-white/80 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",size:24})}),s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold text-gray-500 bg-white px-2 py-0.5 rounded shadow-sm z-20",children:"Ver documento"})]})}),s.jsx("div",{className:`absolute top-8 ${o?"-right-3 border-l-[12px] border-l-white":"-left-3 border-r-[12px] border-r-white"} w-0 h-0 border-t-[12px] border-t-transparent border-b-[12px] border-b-transparent`})]})}),s.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 bg-feria-gold rounded-full ring-4 ring-feria-blue z-10 shadow-[0_0_15px_rgba(251,191,36,0.5)]"})}),s.jsx("div",{className:"w-5/12 pl-8 pr-8",children:s.jsxs(j.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,delay:.2},className:"rounded-2xl overflow-hidden shadow-2xl border-4 border-white/10 h-[300px] group relative cursor-pointer bg-black/20",onClick:()=>n&&n(p),children:[s.jsx("img",{src:p,alt:i.title,className:"w-full h-full object-contain p-2 transition-transform duration-700 group-hover:scale-105"}),i.images&&s.jsxs("button",{onClick:m,className:"absolute bottom-4 right-4 bg-red-600 text-white p-2 rounded-full shadow-lg hover:bg-red-700 transition-colors z-20 font-bold text-xs flex items-center gap-1 border-2 border-white",children:[s.jsx("span",{children:"↻"})," Ver otra"]}),s.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"})]})})]})}function Ot({children:i,onSendToBack:r,sensitivity:n,disableDrag:o=!1}){const l=Q(0),d=Q(0),p=$(d,[-100,100],[60,-60]),m=$(l,[-100,100],[-60,60]);function y(f,b){Math.abs(b.offset.x)>n||Math.abs(b.offset.y)>n?r():(l.set(0),d.set(0))}return o?s.jsx(j.div,{className:"card-rotate-disabled",style:{x:0,y:0},children:i}):s.jsx(j.div,{className:"card-rotate",style:{x:l,y:d,rotateX:p,rotateY:m},drag:!0,dragConstraints:{top:0,right:0,bottom:0,left:0},dragElastic:.6,whileTap:{cursor:"grabbing"},onDragEnd:y,children:i})}function pe({randomRotation:i=!1,sensitivity:r=200,cards:n=[],animationConfig:o={stiffness:260,damping:20},sendToBackOnClick:l=!1,autoplay:d=!1,autoplayDelay:p=3e3,pauseOnHover:m=!1,mobileClickOnly:y=!1,mobileBreakpoint:f=768}){const[b,P]=v.useState(!1),[N,C]=v.useState(!1);v.useEffect(()=>{const u=()=>{P(window.innerWidth<f)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[f]);const A=y&&b,U=l||A,[L,W]=v.useState(()=>n.length?n.map((u,e)=>({id:e+1,content:u})):[{id:1,content:s.jsx("img",{src:"https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?q=80&w=500&auto=format",alt:"card-1",className:"card-image"})},{id:2,content:s.jsx("img",{src:"https://images.unsplash.com/photo-1449844908441-8829872d2607?q=80&w=500&auto=format",alt:"card-2",className:"card-image"})},{id:3,content:s.jsx("img",{src:"https://images.unsplash.com/photo-1452626212852-811d58933cae?q=80&w=500&auto=format",alt:"card-3",className:"card-image"})},{id:4,content:s.jsx("img",{src:"https://images.unsplash.com/photo-1572120360610-d971b9d7767c?q=80&w=500&auto=format",alt:"card-4",className:"card-image"})}]);v.useEffect(()=>{n.length&&W(n.map((u,e)=>({id:e+1,content:u})))},[n]);const k=u=>{W(e=>{const t=[...e],a=t.findIndex(c=>c.id===u),[h]=t.splice(a,1);return t.unshift(h),t})};return v.useEffect(()=>{if(d&&L.length>1&&!N){const u=setInterval(()=>{const e=L[L.length-1].id;k(e)},p);return()=>clearInterval(u)}},[d,p,L,N]),s.jsx("div",{className:"stack-container",onMouseEnter:()=>m&&C(!0),onMouseLeave:()=>m&&C(!1),children:L.map((u,e)=>{const t=i?Math.random()*10-5:0;return s.jsx(Ot,{onSendToBack:()=>k(u.id),sensitivity:r,disableDrag:A,children:s.jsx(j.div,{className:"card",onClick:()=>U&&k(u.id),animate:{rotateZ:(L.length-e-1)*4+t,scale:1+e*.06-L.length*.06,transformOrigin:"90% 90%"},initial:!1,transition:{type:"spring",stiffness:o.stiffness,damping:o.damping},children:u.content})},u.id)})})}var H={exports:{}},zt=H.exports,ue;function Ht(){return ue||(ue=1,(function(i,r){(function(n,o){o(r)})(zt,(function(n){class o{constructor(e,t){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=t,this.nowDrawingDensity=this.createdDensity,this.render=e}setDensity(e){this.createdDensity=e,this.nowDrawingDensity=e}setDrawingDensity(e){this.nowDrawingDensity=e}setPosition(e){this.state.position=e}setAngle(e){this.state.angle=e}setArea(e){this.state.area=e}setHardDrawingAngle(e){this.state.hardDrawingAngle=e}setHardAngle(e){this.state.hardAngle=e,this.state.hardDrawingAngle=e}setOrientation(e){this.orientation=e}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class l extends o{constructor(e,t,a){super(e,a),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=t}draw(e){const t=this.render.getContext(),a=this.render.convertToGlobal(this.state.position),h=this.render.getRect().pageWidth,c=this.render.getRect().height;t.save(),t.translate(a.x,a.y),t.beginPath();for(let g of this.state.area)g!==null&&(g=this.render.convertToGlobal(g),t.lineTo(g.x-a.x,g.y-a.y));t.rotate(this.state.angle),t.clip(),this.isLoad?t.drawImage(this.image,0,0,h,c):this.drawLoader(t,{x:0,y:0},h,c),t.restore()}simpleDraw(e){const t=this.render.getRect(),a=this.render.getContext(),h=t.pageWidth,c=t.height,g=e===1?t.left+t.pageWidth:t.left,x=t.top;this.isLoad?a.drawImage(this.image,g,x,h,c):this.drawLoader(a,{x:g,y:x},h,c)}drawLoader(e,t,a,h){e.beginPath(),e.strokeStyle="rgb(200, 200, 200)",e.fillStyle="rgb(255, 255, 255)",e.lineWidth=1,e.rect(t.x+1,t.y+1,a-1,h-1),e.stroke(),e.fill();const c={x:t.x+a/2,y:t.y+h/2};e.beginPath(),e.lineWidth=10,e.arc(c.x,c.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),e.stroke(),e.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class d{constructor(e,t){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=t,this.app=e,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let e=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([e]),e++);for(let t=e;t<this.pages.length;t+=2)t<this.pages.length-1?this.landscapeSpread.push([t,t+1]):(this.landscapeSpread.push([t]),this.pages[t].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(e){const t=this.getSpread();for(let a=0;a<t.length;a++)if(e===t[a][0]||e===t[a][1])return a;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(e){if(e>=0&&e<this.pages.length)return this.pages[e];throw new Error("Invalid page number")}nextBy(e){const t=this.pages.indexOf(e);return t<this.pages.length-1?this.pages[t+1]:null}prevBy(e){const t=this.pages.indexOf(e);return t>0?this.pages[t-1]:null}getFlippingPage(e){const t=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return e===0?this.pages[t].newTemporaryCopy():this.pages[t-1];{const a=e===0?this.getSpread()[t+1]:this.getSpread()[t-1];return a.length===1||e===0?this.pages[a[0]]:this.pages[a[1]]}}getBottomPage(e){const t=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return e===0?this.pages[t+1]:this.pages[t-1];{const a=e===0?this.getSpread()[t+1]:this.getSpread()[t-1];return a.length===1?this.pages[a[0]]:e===0?this.pages[a[1]]:this.pages[a[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(e=null){if(e===null&&(e=this.currentPageIndex),e<0||e>=this.pages.length)return;const t=this.getSpreadIndexByPage(e);t!==null&&(this.currentSpreadIndex=t,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(e){if(!(e>=0&&e<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=e}showSpread(){const e=this.getSpread()[this.currentSpreadIndex];e.length===2?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(this.pages[e[1]])):this.render.getOrientation()==="landscape"&&e[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[e[0]])),this.currentPageIndex=e[0],this.app.updatePageIndex(this.currentPageIndex)}}class p extends d{constructor(e,t,a){super(e,t),this.imagesHref=a}load(){for(const e of this.imagesHref){const t=new l(this.render,e,"soft");t.load(),this.pages.push(t)}this.createSpread()}}class m{static GetDistanceBetweenTwoPoint(e,t){return e===null||t===null?1/0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static GetSegmentLength(e){return m.GetDistanceBetweenTwoPoint(e[0],e[1])}static GetAngleBetweenTwoLine(e,t){const a=e[0].y-e[1].y,h=t[0].y-t[1].y,c=e[1].x-e[0].x,g=t[1].x-t[0].x;return Math.acos((a*h+c*g)/(Math.sqrt(a*a+c*c)*Math.sqrt(h*h+g*g)))}static PointInRect(e,t){return t===null?null:t.x>=e.left&&t.x<=e.width+e.left&&t.y>=e.top&&t.y<=e.top+e.height?t:null}static GetRotatedPoint(e,t,a){return{x:e.x*Math.cos(a)+e.y*Math.sin(a)+t.x,y:e.y*Math.cos(a)-e.x*Math.sin(a)+t.y}}static LimitPointToCircle(e,t,a){if(m.GetDistanceBetweenTwoPoint(e,a)<=t)return a;const h=e.x,c=e.y,g=a.x,x=a.y;let w=Math.sqrt(Math.pow(t,2)*Math.pow(h-g,2)/(Math.pow(h-g,2)+Math.pow(c-x,2)))+h;a.x<0&&(w*=-1);let S=(w-h)*(c-x)/(h-g)+c;return h-g+c===0&&(S=t),{x:w,y:S}}static GetIntersectBetweenTwoSegment(e,t,a){return m.PointInRect(e,m.GetIntersectBeetwenTwoLine(t,a))}static GetIntersectBeetwenTwoLine(e,t){const a=e[0].y-e[1].y,h=t[0].y-t[1].y,c=e[1].x-e[0].x,g=t[1].x-t[0].x,x=e[0].x*e[1].y-e[1].x*e[0].y,w=t[0].x*t[1].y-t[1].x*t[0].y,S=a*w-h*x,E=c*w-g*x,T=-(x*g-w*c)/(a*g-h*c),D=-(a*w-h*x)/(a*g-h*c);if(isFinite(T)&&isFinite(D))return{x:T,y:D};if(Math.abs(S-E)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(e,t){const a=Math.abs(e.x-t.x),h=Math.abs(e.y-t.y),c=Math.max(a,h),g=[e];function x(w,S,E,T,D){return S>w?w+D*(E/T):S<w?w-D*(E/T):w}for(let w=1;w<=c;w+=1)g.push({x:x(e.x,t.x,a,c,w),y:x(e.y,t.y,h,c,w)});return g}}class y extends o{constructor(e,t,a){super(e,a),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=t,this.element.classList.add("stf__item"),this.element.classList.add("--"+a)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new y(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(e){const t=e||this.nowDrawingDensity,a=this.render.convertToGlobal(this.state.position),h=this.render.getRect().pageWidth,c=this.render.getRect().height;this.element.classList.remove("--simple");const g=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${h}px;
            height: ${c}px;
        `;t==="hard"?this.drawHard(g):this.drawSoft(a,g)}drawHard(e=""){const t=this.render.getRect().left+this.render.getRect().width/2,a=this.state.hardDrawingAngle,h=e+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${a}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${t}px, 0, 0) rotateY(${a}deg);`);this.element.style.cssText=h}drawSoft(e,t=""){let a="polygon( ";for(const c of this.state.area)if(c!==null){let g=this.render.getDirection()===1?{x:-c.x+this.state.position.x,y:c.y-this.state.position.y}:{x:c.x-this.state.position.x,y:c.y-this.state.position.y};g=m.GetRotatedPoint(g,{x:0,y:0},this.state.angle),a+=g.x+"px "+g.y+"px, "}a=a.slice(0,-2),a+=")";const h=t+`transform-origin: 0 0; clip-path: ${a}; -webkit-clip-path: ${a};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${e.x}px, ${e.y}px);`:`transform: translate3d(${e.x}px, ${e.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=h}simpleDraw(e){const t=this.render.getRect(),a=t.pageWidth,h=t.height,c=e===1?t.left+t.pageWidth:t.left,g=t.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${h}px; 
            left: ${c}px; 
            top: ${g}px; 
            width: ${a}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(e){super.setOrientation(e),this.element.classList.remove("--left","--right"),this.element.classList.add(e===1?"--right":"--left")}setDrawingDensity(e){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+e),super.setDrawingDensity(e)}}class f extends d{constructor(e,t,a,h){super(e,t),this.element=a,this.pagesElement=h}load(){for(const e of this.pagesElement){const t=new y(this.render,e,e.dataset.density==="hard"?"hard":"soft");t.load(),this.pages.push(t)}this.createSpread()}}class b{constructor(e,t,a,h){this.direction=e,this.corner=t,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(a,10),this.pageHeight=parseInt(h,10)}calc(e){try{return this.position=this.calcAngleAndPosition(e),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const e=[];let t=!1;return e.push(this.rect.topLeft),e.push(this.topIntersectPoint),this.sideIntersectPoint===null?t=!0:(e.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(t=!1)),e.push(this.bottomIntersectPoint),(t||this.corner==="bottom")&&e.push(this.rect.bottomLeft),e}getBottomClipArea(){const e=[];return e.push(this.topIntersectPoint),this.corner==="top"?e.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&e.push({x:this.pageWidth,y:0}),e.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?m.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&e.push(this.sideIntersectPoint):this.corner==="top"&&e.push({x:this.pageWidth,y:this.pageHeight}),e.push(this.bottomIntersectPoint),e.push(this.topIntersectPoint),e}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const e=m.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?e:Math.PI-e}calcAngleAndPosition(e){let t=e;if(this.updateAngleAndGeometry(t),t=this.corner==="top"?this.checkPositionAtCenterLine(t,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(t,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(t.x-this.pageWidth)<1&&Math.abs(t.y)<1)throw new Error("Point is too small");return t}updateAngleAndGeometry(e){this.angle=this.calculateAngle(e),this.rect=this.getPageRect(e)}calculateAngle(e){const t=this.pageWidth-e.x+1,a=this.corner==="bottom"?this.pageHeight-e.y:e.y;let h=2*Math.acos(t/Math.sqrt(a*a+t*t));a<0&&(h=-h);const c=Math.PI-h;if(!isFinite(h)||c>=0&&c<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(h=-h),h}getPageRect(e){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],e):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],e)}getRectFromBasePoint(e,t){return{topLeft:this.getRotatedPoint(e[0],t),topRight:this.getRotatedPoint(e[1],t),bottomLeft:this.getRotatedPoint(e[2],t),bottomRight:this.getRotatedPoint(e[3],t)}}getRotatedPoint(e,t){return{x:e.x*Math.cos(this.angle)+e.y*Math.sin(this.angle)+t.x,y:e.y*Math.cos(this.angle)-e.x*Math.sin(this.angle)+t.y}}calculateIntersectPoint(e){const t={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[e,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[e,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[e,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=m.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(e,t,a){let h=e;const c=m.LimitPointToCircle(t,this.pageWidth,h);h!==c&&(h=c,this.updateAngleAndGeometry(h));const g=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let x=this.rect.bottomRight,w=this.rect.topLeft;if(this.corner==="bottom"&&(x=this.rect.topRight,w=this.rect.bottomLeft),x.x<=0){const S=m.LimitPointToCircle(a,g,w);S!==h&&(h=S,this.updateAngleAndGeometry(h))}return h}getSegmentToShadowLine(){const e=this.getShadowStartPoint();return[e,e!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class P{constructor(e,t){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=e,this.app=t}fold(e){this.setState("user_fold"),this.calc===null&&this.start(e),this.do(this.render.convertToPage(e))}flip(e){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(e)||(this.calc!==null&&this.render.finishAnimation(),!this.start(e)))return;const t=this.getBoundsRect();this.setState("flipping");const a=t.height/10,h=this.calc.getCorner()==="bottom"?t.height-a:a,c=this.calc.getCorner()==="bottom"?t.height:0;this.calc.calc({x:t.pageWidth-a,y:h}),this.animateFlippingTo({x:t.pageWidth-a,y:h},{x:-t.pageWidth,y:c},!0)}start(e){this.reset();const t=this.render.convertToBook(e),a=this.getBoundsRect(),h=this.getDirectionByPoint(t),c=t.y>=a.height/2?"bottom":"top";if(!this.checkDirection(h))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(h),this.bottomPage=this.app.getPageCollection().getBottomPage(h),this.render.getOrientation()==="landscape")if(h===1){const g=this.app.getPageCollection().nextBy(this.flippingPage);g!==null&&this.flippingPage.getDensity()!==g.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),g.setDrawingDensity("hard"))}else{const g=this.app.getPageCollection().prevBy(this.flippingPage);g!==null&&this.flippingPage.getDensity()!==g.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),g.setDrawingDensity("hard"))}return this.render.setDirection(h),this.calc=new b(h,c,a.pageWidth.toString(10),a.height.toString(10)),!0}catch{return!1}}do(e){if(this.calc!==null&&this.calc.calc(e)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(e,t){const a=this.app.getPageCollection().getCurrentSpreadIndex(),h=this.app.getPageCollection().getSpreadIndexByPage(e);try{h>a&&(this.app.getPageCollection().setCurrentSpreadIndex(h-1),this.flipNext(t)),h<a&&(this.app.getPageCollection().setCurrentSpreadIndex(h+1),this.flipPrev(t))}catch{}}flipNext(e){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:e==="top"?1:this.render.getRect().height-2})}flipPrev(e){this.flip({x:10,y:e==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const e=this.calc.getPosition(),t=this.getBoundsRect(),a=this.calc.getCorner()==="bottom"?t.height:0;e.x<=0?this.animateFlippingTo(e,{x:-t.pageWidth,y:a},!0):this.animateFlippingTo(e,{x:t.pageWidth,y:a},!1)}showCorner(e){if(!this.checkState("read","fold_corner"))return;const t=this.getBoundsRect(),a=t.pageWidth;if(this.isPointOnCorners(e))if(this.calc===null){if(!this.start(e))return;this.setState("fold_corner"),this.calc.calc({x:a-1,y:1});const h=50,c=this.calc.getCorner()==="bottom"?t.height-1:1,g=this.calc.getCorner()==="bottom"?t.height-h:h;this.animateFlippingTo({x:a-1,y:c},{x:a-h,y:g},!1,!1)}else this.do(this.render.convertToPage(e));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(e,t,a,h=!0){const c=m.GetCordsFromTwoPoint(e,t),g=[];for(const w of c)g.push(()=>this.do(w));const x=this.getAnimationDuration(c.length);this.render.startAnimation(g,x,()=>{this.calc&&(a&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),h&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(e){this.state!==e&&(this.app.updateState(e),this.state=e)}getDirectionByPoint(e){const t=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(e.x-t.pageWidth<=t.width/5)return 1}else if(e.x<t.width/2)return 1;return 0}getAnimationDuration(e){const t=this.app.getSettings().flippingTime;return e>=1e3?t:e/1e3*t}checkDirection(e){return e===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...e){for(const t of e)if(this.state===t)return!0;return!1}isPointOnCorners(e){const t=this.getBoundsRect(),a=t.pageWidth,h=Math.sqrt(Math.pow(a,2)+Math.pow(t.height,2))/5,c=this.render.convertToBook(e);return c.x>0&&c.y>0&&c.x<t.width&&c.y<t.height&&(c.x<h||c.x>t.width-h)&&(c.y<h||c.y>t.height-h)}}class N{constructor(e,t){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=t,this.app=e;const a=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=a.exec(window.navigator.userAgent)!==null}render(e){if(this.animation!==null){const t=Math.round((e-this.animation.startedAt)/this.animation.durationFrame);t<this.animation.frames.length?this.animation.frames[t]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=e,this.drawFrame()}start(){this.update();const e=t=>{this.render(t),requestAnimationFrame(e)};requestAnimationFrame(e)}startAnimation(e,t,a){this.finishAnimation(),this.animation={frames:e,duration:t,durationFrame:t/e.length,onAnimateEnd:a,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const e=this.calculateBoundsRect();this.orientation!==e&&(this.orientation=e,this.app.updateOrientation(e))}calculateBoundsRect(){let e="landscape";const t=this.getBlockWidth(),a=t/2,h=this.getBlockHeight()/2,c=this.setting.width/this.setting.height;let g=this.setting.width,x=this.setting.height,w=a-g;return this.setting.size==="stretch"?(t<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(e="portrait"),g=e==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,g>this.setting.maxWidth&&(g=this.setting.maxWidth),x=g/c,x>this.getBlockHeight()&&(x=this.getBlockHeight(),g=x*c),w=e==="portrait"?a-g/2-g:a-g):t<2*g&&this.app.getSettings().usePortrait&&(e="portrait",w=a-g/2-g),this.boundsRect={left:w,top:h-x/2,width:2*g,height:x,pageWidth:g},e}setShadowData(e,t,a,h){if(!this.app.getSettings().drawShadow)return;const c=100*this.getSettings().maxShadowOpacity;this.shadow={pos:e,angle:t,width:3*this.getRect().pageWidth/4*a/100,opacity:(100-a)*c/100/100,direction:h,progress:2*a}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(e){this.pageRect=e}setDirection(e){this.direction=e}setRightPage(e){e!==null&&e.setOrientation(1),this.rightPage=e}setLeftPage(e){e!==null&&e.setOrientation(0),this.leftPage=e}setBottomPage(e){e!==null&&e.setOrientation(this.direction===1?0:1),this.bottomPage=e}setFlippingPage(e){e!==null&&e.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=e}convertToBook(e){const t=this.getRect();return{x:e.x-t.left,y:e.y-t.top}}isSafari(){return this.safari}convertToPage(e,t){t||(t=this.direction);const a=this.getRect();return{x:t===0?e.x-a.left-a.width/2:a.width/2-e.x+a.left,y:e.y-a.top}}convertToGlobal(e,t){if(t||(t=this.direction),e==null)return null;const a=this.getRect();return{x:t===0?e.x+a.left+a.width/2:a.width/2-e.x+a.left,y:e.y+a.top}}convertRectToGlobal(e,t){return t||(t=this.direction),{topLeft:this.convertToGlobal(e.topLeft,t),topRight:this.convertToGlobal(e.topRight,t),bottomLeft:this.convertToGlobal(e.bottomLeft,t),bottomRight:this.convertToGlobal(e.bottomRight,t)}}}class C extends N{constructor(e,t,a){super(e,t),this.canvas=a,this.ctx=a.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const e=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height),this.ctx.clip())}drawBookShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=e.width/20;this.ctx.rect(e.left,e.top,e.width,e.height);const a={x:e.left+e.width/2-t/2,y:0};this.ctx.translate(a.x,a.y);const h=this.ctx.createLinearGradient(0,0,t,0);h.addColorStop(0,"rgba(0, 0, 0, 0)"),h.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),h.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),h.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),h.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),h.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=h,this.ctx.fillRect(0,0,t,2*e.height),this.ctx.restore()}drawOuterShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(e.left,e.top,e.width,e.height);const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const a=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),a.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),a.addColorStop(0,"rgba(0, 0, 0, 0)"),a.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.shadow.width,2*e.height),this.ctx.restore()}drawInnerShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),a=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(a.topLeft.x,a.topLeft.y),this.ctx.lineTo(a.topRight.x,a.topRight.y),this.ctx.lineTo(a.bottomRight.x,a.bottomRight.y),this.ctx.lineTo(a.bottomLeft.x,a.bottomLeft.y),this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const h=3*this.shadow.width/4,c=this.ctx.createLinearGradient(0,0,h,0);this.shadow.direction===0?(this.ctx.translate(-h,-100),c.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),c.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),c.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),c.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),c.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),c.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),c.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),c.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=c,this.ctx.fillRect(0,0,h,2*e.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class A{constructor(e,t,a){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=c=>{if(this.checkTarget(c.target)){const g=this.getMousePos(c.clientX,c.clientY);this.app.startUserTouch(g),c.preventDefault()}},this.onTouchStart=c=>{if(this.checkTarget(c.target)&&c.changedTouches.length>0){const g=c.changedTouches[0],x=this.getMousePos(g.clientX,g.clientY);this.touchPoint={point:x,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(x)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||c.preventDefault()}},this.onMouseUp=c=>{const g=this.getMousePos(c.clientX,c.clientY);this.app.userStop(g)},this.onMouseMove=c=>{const g=this.getMousePos(c.clientX,c.clientY);this.app.userMove(g,!1)},this.onTouchMove=c=>{if(c.changedTouches.length>0){const g=c.changedTouches[0],x=this.getMousePos(g.clientX,g.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-x.x)>10||this.app.getState()!=="read")&&c.cancelable&&this.app.userMove(x,!0),this.app.getState()!=="read"&&c.preventDefault()):this.app.userMove(x,!0)}},this.onTouchEnd=c=>{if(c.changedTouches.length>0){const g=c.changedTouches[0],x=this.getMousePos(g.clientX,g.clientY);let w=!1;if(this.touchPoint!==null){const S=x.x-this.touchPoint.point.x,E=Math.abs(x.y-this.touchPoint.point.y);Math.abs(S)>this.swipeDistance&&E<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(S>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),w=!0),this.touchPoint=null}this.app.userStop(x,w)}},this.parentElement=e,e.classList.add("stf__parent"),e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=e.querySelector(".stf__wrapper"),this.app=t;const h=this.app.getSettings().usePortrait?1:2;e.style.minWidth=a.minWidth*h+"px",e.style.minHeight=a.minHeight+"px",a.size==="fixed"&&(e.style.minWidth=a.width*h+"px",e.style.minHeight=a.height+"px"),a.autoSize&&(e.style.width="100%",e.style.maxWidth=2*a.maxWidth+"px"),e.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=a.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(e){this.wrapper.classList.remove("--portrait","--landscape"),e==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(e,t){const a=this.distElement.getBoundingClientRect();return{x:e-a.left,y:t-a.top}}checkTarget(e){return!this.app.getSettings().clickEventForward||!["a","button"].includes(e.tagName.toLowerCase())}}class U extends A{constructor(e,t,a,h){super(e,t,a),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=e.querySelector(".stf__block"),this.items=h;for(const c of h)this.distElement.appendChild(c);this.setHandlers()}clear(){for(const e of this.items)this.parentElement.appendChild(e)}updateItems(e){this.removeHandlers(),this.distElement.innerHTML="";for(const t of e)this.distElement.appendChild(t);this.items=e,this.setHandlers()}update(){this.app.getRender().update()}}class L extends A{constructor(e,t,a){super(e,t,a),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=e.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const e=getComputedStyle(this.canvas),t=parseInt(e.getPropertyValue("width"),10),a=parseInt(e.getPropertyValue("height"),10);this.canvas.width=t,this.canvas.height=a}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class W extends N{constructor(e,t,a){super(e,t),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=a,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const e=this.getRect(),t=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let a=(100-t)*(2.5*e.pageWidth)/100+20;a>e.pageWidth&&(a=e.pageWidth);let h=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${a}px;
            height: ${e.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*t/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${e.left+e.width/2}px;
            transform-origin: 0 0;
        `;h+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=h}drawHardOuterShadow(){const e=this.getRect();let t=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*e.pageWidth)/100+20;t>e.pageWidth&&(t=e.pageWidth);let a=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${t}px;
            height: ${e.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${e.left+e.width/2}px;
            transform-origin: 0 0;
        `;a+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=a}drawInnerShadow(){const e=this.getRect(),t=3*this.shadow.width/4,a=this.getDirection()===0?t:0,h=this.getDirection()===0?"to left":"to right",c=this.convertToGlobal(this.shadow.pos),g=this.shadow.angle+3*Math.PI/2,x=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let w="polygon( ";for(const E of x){let T=this.getDirection()===1?{x:-E.x+this.shadow.pos.x,y:E.y-this.shadow.pos.y}:{x:E.x-this.shadow.pos.x,y:E.y-this.shadow.pos.y};T=m.GetRotatedPoint(T,{x:a,y:100},g),w+=T.x+"px "+T.y+"px, "}w=w.slice(0,-2),w+=")";const S=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${t}px;
            height: ${2*e.height}px;
            background: linear-gradient(${h},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${a}px 100px;
            transform: translate3d(${c.x-a}px, ${c.y-100}px, 0) rotate(${g}rad);
            clip-path: ${w};
            -webkit-clip-path: ${w};
        `;this.innerShadow.style.cssText=S}drawOuterShadow(){const e=this.getRect(),t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),a=this.shadow.angle+3*Math.PI/2,h=this.getDirection()===1?this.shadow.width:0,c=this.getDirection()===0?"to right":"to left",g=[{x:0,y:0},{x:e.pageWidth,y:0},{x:e.pageWidth,y:e.height},{x:0,y:e.height}];let x="polygon( ";for(const S of g)if(S!==null){let E=this.getDirection()===1?{x:-S.x+this.shadow.pos.x,y:S.y-this.shadow.pos.y}:{x:S.x-this.shadow.pos.x,y:S.y-this.shadow.pos.y};E=m.GetRotatedPoint(E,{x:h,y:100},a),x+=E.x+"px "+E.y+"px, "}x=x.slice(0,-2),x+=")";const w=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*e.height}px;
            background: linear-gradient(${c}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${h}px 100px;
            transform: translate3d(${t.x-h}px, ${t.y-100}px, 0) rotate(${a}rad);
            clip-path: ${x};
            -webkit-clip-path: ${x};
        `;this.outerShadow.style.cssText=w}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const e=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(e))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const e of this.app.getPageCollection().getPages())e!==this.leftPage&&e!==this.rightPage&&e!==this.flippingPage&&e!==this.bottomPage&&(e.getElement().style.cssText="display: none"),e.getTemporaryCopy()!==this.flippingPage&&e.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class k{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(e){const t=this._default;if(Object.assign(t,e),t.size!=="stretch"&&t.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(t.width<=0||t.height<=0)throw new Error("Invalid width or height");if(t.flippingTime<=0)throw new Error("Invalid flipping time");return t.size==="stretch"?(t.minWidth<=0&&(t.minWidth=100),t.maxWidth<t.minWidth&&(t.maxWidth=2e3),t.minHeight<=0&&(t.minHeight=100),t.maxHeight<t.minHeight&&(t.maxHeight=2e3)):(t.minWidth=t.width,t.maxWidth=t.width,t.minHeight=t.height,t.maxHeight=t.height),t}}(function(u,e){e===void 0&&(e={});var t=e.insertAt;if(typeof document<"u"){var a=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css",t==="top"&&a.firstChild?a.insertBefore(h,a.firstChild):a.appendChild(h),h.styleSheet?h.styleSheet.cssText=u:h.appendChild(document.createTextNode(u))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(u,e){return this.events.has(u)?this.events.get(u).push(e):this.events.set(u,[e]),this}off(u){this.events.delete(u)}trigger(u,e,t=null){if(this.events.has(u))for(const a of this.events.get(u))a({data:t,object:e})}}{constructor(u,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new k().getSettings(e),this.block=u}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(u){this.ui=new L(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new C(this,this.setting,e),this.flipController=new P(this.render,this),this.pages=new p(this,this.render,u),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(u){this.ui=new U(this.block,this,this.setting,u),this.render=new W(this,this.setting,this.ui.getDistElement()),this.flipController=new P(this.render,this),this.pages=new f(this,this.render,this.ui.getDistElement(),u),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(u){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new p(this,this.render,u),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(u){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new f(this,this.render,this.ui.getDistElement(),u),this.pages.load(),this.ui.updateItems(u),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(u){this.pages.show(u)}flipNext(u="top"){this.flipController.flipNext(u)}flipPrev(u="top"){this.flipController.flipPrev(u)}flip(u,e="top"){this.flipController.flipToPage(u,e)}updateState(u){this.trigger("changeState",this,u)}updatePageIndex(u){this.trigger("flip",this,u)}updateOrientation(u){this.ui.setOrientationStyle(u),this.update(),this.trigger("changeOrientation",this,u)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(u){return this.pages.getPage(u)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(u){this.mousePosition=u,this.isUserTouch=!0,this.isUserMove=!1}userMove(u,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&m.GetDistanceBetweenTwoPoint(this.mousePosition,u)>5&&(this.isUserMove=!0,this.flipController.fold(u)):this.flipController.showCorner(u)}userStop(u,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(u)))}},Object.defineProperty(n,"__esModule",{value:!0})}))})(H,H.exports)),H.exports}var _t=Ht();const $t=I.forwardRef((i,r)=>{const n=v.useRef(null),o=v.useRef([]),l=v.useRef(),[d,p]=v.useState([]);v.useImperativeHandle(r,()=>({pageFlip:()=>l.current}));const m=v.useCallback(()=>{l.current&&l.current.clear()},[]),y=v.useCallback(()=>{const f=l.current;f&&(f.off("flip"),f.off("changeOrientation"),f.off("changeState"),f.off("init"),f.off("update"))},[]);return v.useEffect(()=>{if(o.current=[],i.children){const f=I.Children.map(i.children,b=>I.cloneElement(b,{ref:P=>{P&&o.current.push(P)}}));(!i.renderOnlyPageLengthChange||d.length!==f.length)&&(f.length<d.length&&m(),p(f))}},[i.children]),v.useEffect(()=>{const f=()=>{const b=l.current;b&&(i.onFlip&&b.on("flip",P=>i.onFlip(P)),i.onChangeOrientation&&b.on("changeOrientation",P=>i.onChangeOrientation(P)),i.onChangeState&&b.on("changeState",P=>i.onChangeState(P)),i.onInit&&b.on("init",P=>i.onInit(P)),i.onUpdate&&b.on("update",P=>i.onUpdate(P)))};d.length>0&&o.current.length>0&&(y(),n.current&&!l.current&&(l.current=new _t.PageFlip(n.current,i)),l.current.getFlipController()?l.current.updateFromHtml(o.current):l.current.loadFromHTML(o.current),f())},[d]),I.createElement("div",{ref:n,className:i.className,style:i.style},d)}),Ft=I.memo($t),me=Array.from({length:29},(i,r)=>`/libro/page_${r+1}.webp`),Wt=I.forwardRef((i,r)=>s.jsx("div",{className:"demoPage bg-white shadow-lg overflow-hidden border-r border-gray-200",ref:r,children:s.jsxs("div",{className:"h-full w-full relative",children:[s.jsx("img",{src:i.image,alt:`Página ${i.number} `,className:"w-full h-full object-contain",loading:"lazy"}),s.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-gray-400 font-serif",children:i.number})]})})),Bt=I.forwardRef((i,r)=>s.jsxs("div",{className:"demoPage bg-[#5D4037] shadow-xl overflow-hidden border-r-4 border-[#3E2723] flex flex-col items-center justify-center p-8 text-center relative",ref:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/10 mix-blend-multiply pointer-events-none"}),s.jsxs("div",{className:"w-full h-full border-4 border-[#FFD700] border-double rounded-lg flex flex-col items-center justify-center p-6 relative z-10",children:[s.jsx("div",{className:"w-56 h-56 mb-8 opacity-90",children:s.jsx("img",{src:"/escudo_pendon.webp",alt:"Escudo",className:"w-full h-full object-contain filter drop-shadow-lg"})}),s.jsx("h1",{className:"text-4xl font-serif font-bold text-[#FFD700] mb-2 drop-shadow-md",children:"200 Años"}),s.jsx("h2",{className:"text-2xl font-serif text-[#FFECB3] mb-8 drop-shadow-sm uppercase tracking-widest",children:"Feria de Chilpancingo"}),s.jsx("div",{className:"w-32 h-1 bg-[#FFD700] rounded-full mb-8"}),s.jsx("p",{className:"text-[#D7CCC8] text-sm uppercase tracking-wider font-semibold",children:"Compendio Histórico"}),s.jsx("p",{className:"text-[#D7CCC8] text-xs mt-2",children:"1825 - 2025"}),s.jsxs("div",{className:"absolute bottom-6 right-6 flex flex-col items-center gap-1 animate-pulse",children:[s.jsx(qe,{className:"w-6 h-6 text-[#FFD700] rotate-12"}),s.jsx("span",{className:"text-[10px] text-[#FFECB3] font-serif uppercase tracking-widest",children:"Abrir"})]})]})]})),Gt=I.forwardRef((i,r)=>s.jsxs("div",{className:"demoPage bg-[#5D4037] shadow-xl overflow-hidden border-l-4 border-[#3E2723] flex flex-col items-center justify-center p-8 text-center relative",ref:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/10 mix-blend-multiply pointer-events-none"}),s.jsxs("div",{className:"w-full h-full border-4 border-[#FFD700] border-double rounded-lg flex flex-col items-center justify-center p-6 relative z-10",children:[s.jsx("div",{className:"w-48 h-48 mb-6 opacity-90",children:s.jsx("img",{src:"/escudo_pendon.webp",alt:"Escudo",className:"w-full h-full object-contain filter drop-shadow-lg",loading:"eager"})}),s.jsx("h2",{className:"text-2xl font-serif text-[#FFECB3] mb-4 drop-shadow-sm uppercase tracking-widest",children:"Feria de Chilpancingo"}),s.jsx("p",{className:"text-[#D7CCC8] text-sm uppercase tracking-wider font-semibold",children:"Orgullo y Tradición"})]})]}));function qt(){const i=I.useRef(null);I.useEffect(()=>{["/escudo_pendon.webp",...me].forEach(o=>{const l=new Image;l.src=o})},[]);const r=()=>{i.current&&i.current.pageFlip().turnToPage(0)};return s.jsxs("section",{className:"w-full py-20 bg-neutral-900 flex flex-col items-center justify-center overflow-hidden",children:[s.jsxs("div",{className:"text-center mb-24 relative z-20 px-4",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-amber-400 mb-4 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]",children:"Libro Histórico"}),s.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto font-medium",children:"Una mirada histórica a través de las páginas. Desliza o haz clic en las esquinas para pasar de página."})]}),s.jsx("div",{className:"relative z-10 flex justify-center items-center w-full max-w-[1200px] h-[400px] md:h-[600px]",children:s.jsxs(Ft,{width:450,height:600,size:"stretch",minWidth:300,maxWidth:800,minHeight:400,maxHeight:1e3,maxShadowOpacity:.5,showCover:!0,mobileScrollSupport:!0,className:"shadow-2xl",ref:i,children:[s.jsx(Bt,{}),me.map((n,o)=>s.jsx(Wt,{number:o+1,image:n},o)),s.jsx(Gt,{})]})}),s.jsxs("div",{className:"mt-24 flex flex-col items-center gap-4 relative z-20",children:[s.jsx("p",{className:"text-gray-500 text-sm animate-pulse",children:"← Arrastra las esquinas para leer →"}),s.jsx("button",{onClick:r,className:"px-6 py-2 bg-[#FFD700] text-[#3E2723] font-serif font-bold rounded-full shadow-lg hover:bg-amber-400 transition-colors duration-300 text-sm",children:"Regresar a la Portada"})]})]})}function Vt(){const i=Array.from({length:29},(p,m)=>`/fotos historicas/historia_${m+1}.webp`),r=i.slice(0,10),n=i.slice(10,20),o=i.slice(20,29),l=[r,n,o],d=i.slice(0,10);return s.jsxs("section",{id:"historical-gallery",className:"py-24 bg-neutral-900 relative overflow-hidden",children:[s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-amber-50 mb-6",children:"Memoria Visual"}),s.jsx("p",{className:"text-neutral-300 text-lg",children:"Un recorrido fotográfico por los momentos que han marcado nuestra historia."})]}),s.jsxs("div",{className:"md:hidden flex flex-col items-center",children:[s.jsx("div",{className:"relative h-[400px] w-full max-w-xs mb-12",children:s.jsx(pe,{randomRotation:!0,sensitivity:180,sendToBackOnClick:!1,autoplay:!1,cards:d.map((p,m)=>s.jsx("div",{className:"w-full h-full relative group",children:s.jsx("img",{src:p,alt:`Foto histórica ${m+1}`,className:"w-full h-full object-cover rounded-2xl shadow-xl"})},`mobile-${m}`))})}),s.jsxs(F,{to:"/galeria",className:"group flex items-center gap-2 text-amber-50 text-lg hover:text-amber-200 transition-colors uppercase tracking-widest text-sm font-light mt-4",children:[s.jsx("span",{children:"Ver galería completa"}),s.jsx("div",{className:"w-8 h-[1px] bg-amber-50 group-hover:bg-amber-200 transition-colors"})]})]}),s.jsx("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-3 md:gap-8 max-w-7xl mx-auto items-center justify-center",children:l.map((p,m)=>s.jsx("div",{className:"relative h-[400px] w-full max-w-xs mx-auto",children:s.jsx(pe,{randomRotation:!0,sensitivity:180,sendToBackOnClick:!1,autoplay:!1,autoplayDelay:2500+m*500,animationConfig:{stiffness:200,damping:15},cards:p.map((y,f)=>s.jsxs("div",{className:"w-full h-full relative group",children:[s.jsx("img",{src:y,alt:`Foto histórica ${f+1}`,className:"w-full h-full object-cover rounded-2xl transition-all duration-500 shadow-xl"}),s.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors rounded-2xl"}),s.jsx("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:f+1})]},`${m}-${f}`))})},m))}),s.jsx("p",{className:"hidden md:block text-center text-neutral-500 text-sm mt-20 animate-pulse",children:"Arrastra las fotos para descubrir más"}),s.jsx("div",{className:"hidden md:flex justify-center mt-8",children:s.jsxs(F,{to:"/galeria",className:"group flex items-center gap-2 text-amber-50 text-lg hover:text-amber-200 transition-colors uppercase tracking-widest text-sm font-light",children:[s.jsx("span",{children:"Ver galería completa"}),s.jsx("div",{className:"w-8 h-[1px] bg-amber-50 group-hover:bg-amber-200 transition-colors"})]})})]}),s.jsx(qt,{})]})}const Ut=[{id:"local_tlacolol",title:"DOCUMENTAL: Hijos del Tlacolol",category:"Documentales",duration:"30:00",thumbnail:"/videos/HijosDelTlacolol.webp",videoSrc:"/videos/DOCUMENTAL. Hijos del Tlacolol 30min.m4v"},{id:"jmNVa1zmnyQ",title:"PROMOCIONAL OFICIAL EDICIÓN BICENTENARIO",category:"Documentales",duration:"02:29"},{id:"QTAKrov9r8M",title:'PROMOCIONAL DOCUMENTAL "LAS RAÍCES DEL TLACOLOLERO"',category:"Documentales",duration:"01:46"}];function Xt(){const[i,r]=v.useState(null);return s.jsxs("section",{className:"py-24 bg-[#0B1520] relative overflow-hidden",children:[s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-blue-900/20 rounded-full blur-[100px]"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-[500px] h-[500px] bg-amber-600/10 rounded-full blur-[100px]"})]}),s.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-end mb-12 gap-6",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Xe,{className:"text-amber-500 w-5 h-5"}),s.jsx("span",{className:"text-amber-500 font-bold tracking-widest text-xs uppercase",children:"Cine Feria"})]}),s.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-white",children:"Cine Feria"})]})}),s.jsx("div",{className:"flex overflow-x-auto snap-x gap-6 pb-6 scrollbar-hide",children:Ut.map((n,o)=>s.jsxs(j.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:o*.1},viewport:{once:!0},className:"group relative flex-none w-[300px] md:w-[400px] aspect-video rounded-xl overflow-hidden cursor-pointer shadow-lg hover:shadow-blue-900/30 transition-all duration-300 ring-1 ring-white/10 hover:ring-amber-500/50 snap-center",onClick:()=>r(n),children:[s.jsx("img",{src:n.thumbnail||`https://img.youtube.com/vi/${n.id}/maxresdefault.jpg`,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),s.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-feria-blue/90 rounded-full flex items-center justify-center backdrop-blur-sm group-hover:scale-110 transition-transform duration-300 shadow-xl border border-white/20",children:s.jsx(_e,{className:"w-6 h-6 text-white ml-1",fill:"currentColor"})})}),s.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent pt-12",children:[s.jsxs("span",{className:"text-amber-400 text-xs font-bold uppercase tracking-wider mb-1 block",children:[n.category," • ",n.duration]}),s.jsx("h3",{className:"text-white font-medium text-lg leading-tight group-hover:text-amber-100 transition-colors",children:n.title})]})]},n.id))}),s.jsxs("div",{className:"mt-16 text-center",children:[s.jsxs(F,{to:"/videos",className:"inline-flex items-center gap-3 px-8 py-4 bg-feria-blue hover:bg-[#0f3a67] text-white font-medium rounded-full transition-all duration-300 shadow-lg hover:shadow-blue-600/30 group border border-white/10",children:[s.jsx("span",{children:"Explora el Catálogo Completo"}),s.jsx($e,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsx("p",{className:"mt-4 text-neutral-500 text-sm",children:"Documentales, entrevistas y registros históricos exclusivos."})]})]}),s.jsx(ye,{children:i&&s.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 p-4 backdrop-blur-md",onClick:()=>r(null),children:s.jsxs("div",{className:"relative w-full max-w-5xl aspect-video bg-black rounded-lg overflow-hidden shadow-2xl border border-neutral-800",children:[i.videoSrc?s.jsx("video",{src:i.videoSrc,className:"w-full h-full object-cover",controls:!0,autoPlay:!0,controlsList:"nodownload",onContextMenu:n=>n.preventDefault()}):s.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${i.id}?autoplay=1`,title:i.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),s.jsx("button",{className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-feria-blue text-white rounded-full transition-colors backdrop-blur-sm",onClick:n=>{n.stopPropagation(),r(null)},children:s.jsx(ve,{size:24})})]})})})]})}const Yt=[{date:"21 Dic",title:"Paseo del Pendón",location:"Calles Principales",time:"10:00 AM",type:"Tradición"},{date:"24 Dic",title:"Cena de Navidad",location:"Recinto Ferial",time:"08:00 PM",type:"Familiar"},{date:"25 Dic",title:"Danza de Tlacololeros",location:"Plaza de Toros",time:"12:00 PM",type:"Danza"},{date:"31 Dic",title:"Gran Baile de Fin de Año",location:"Teatro del Pueblo",time:"09:00 PM",type:"Música"},{date:"1 Ene",title:"Jaripeo de Año Nuevo",location:"Plaza de Toros",time:"04:00 PM",type:"Jaripeo"},{date:"6 Ene",title:"Clausura",location:"Recinto Ferial",time:"06:00 PM",type:"Ceremonia"}];function Zt(){return s.jsx("section",{id:"program",className:"py-20 bg-gray-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h2",{className:"text-4xl font-serif text-center mb-12 text-feria-blue",children:"Programa Oficial"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Yt.map((i,r)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow border-l-4 border-feria-blue hover:border-feria-gold group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"bg-feria-blue text-white px-3 py-1 rounded-lg text-center min-w-[60px]",children:[s.jsx("span",{className:"block text-xs font-bold uppercase",children:i.date.split(" ")[1]}),s.jsx("span",{className:"block text-xl font-bold",children:i.date.split(" ")[0]})]}),s.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:i.type})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 group-hover:text-feria-blue transition-colors",children:i.title}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{size:16,className:"text-feria-gold"}),s.jsx("span",{children:i.time})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Z,{size:16,className:"text-feria-gold"}),s.jsx("span",{children:i.location})]})]})]},r))})]})})}function Jt(){return s.jsx("section",{id:"location",className:"py-20 bg-white",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-12 items-center",children:[s.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[s.jsx("h2",{className:"text-4xl font-serif text-feria-blue",children:"Ubicación y Sedes"}),s.jsx("div",{className:"h-1 w-20 bg-feria-gold"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"La Feria se lleva a cabo en el Recinto Ferial de Chilpancingo, con eventos satélite en los barrios tradicionales y el centro histórico."}),s.jsxs("ul",{className:"space-y-4",children:[s.jsxs("li",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"bg-feria-blue text-white p-3 rounded-full",children:s.jsx(Z,{})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800",children:"Recinto Ferial"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Colonia Los Ángeles, Zona Oriente"})]})]}),s.jsxs("li",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"bg-feria-gold text-white p-3 rounded-full",children:s.jsx(Z,{})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800",children:"Plaza de Toros Belisario Arteaga"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Eventos Masivos y Jaripeo"})]})]})]})]}),s.jsxs("div",{className:"w-full md:w-1/2 h-80 bg-gray-200 rounded-xl overflow-hidden shadow-lg relative",children:[s.jsx("iframe",{title:"Mapa Chilpancingo",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3775.312961808092!2d-99.4993!3d17.5506!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTfCsDMzJzAyLjIiTiA5OcKwMjknNTcuNSJX!5e0!3m2!1ses-419!2smx!4v1634567890123!5m2!1ses-419!2smx",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-feria-blue/10 pointer-events-none"})]})]})})})}function ns(){const i=Ce();return v.useEffect(()=>{if(i.hash){const r=i.hash.replace("#","");setTimeout(()=>{const n=document.getElementById(r);if(n){const d=n.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:d,behavior:"smooth"})}},100)}},[i]),s.jsxs("div",{className:"min-h-screen flex flex-col relative bg-slate-50 font-sans",children:[s.jsx(Ie,{}),s.jsxs("main",{className:"flex-grow",children:[s.jsx(Mt,{}),s.jsxs("div",{className:"relative z-10 bg-slate-50",children:[s.jsx(At,{}),s.jsx(kt,{}),s.jsx(Vt,{}),s.jsx(Xt,{}),s.jsx(Zt,{}),s.jsx(Jt,{})]})]}),s.jsx(Te,{})]})}export{ns as default};
